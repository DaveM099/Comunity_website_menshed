(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1053:function(t,e,a){"use strict";var s={name:"BaseCheckbox",components:{ValidationMessages:a(1040).a},model:{prop:"value",event:"change"},props:{id:{type:String,required:!0},value:{type:Boolean,required:!0},validations:{type:Array,default:()=>[]},disabled:{type:Boolean,required:!1,default:!1}}},i=(a(1087),a(19)),r=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"relative"},[a("input",{staticClass:"m0 no-outline",attrs:{type:"checkbox",id:t.id,disabled:t.disabled},domProps:{checked:t.value},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("click")},click:function(e){return t.$emit("click")},blur:function(e){return t.$emit("blur")},change:function(e){return t.$emit("change",e.target.checked)}}}),t._v(" "),a("label",{staticClass:"pl35 lh30 pointer",attrs:{for:t.id}},[t._t("default")],2)]),t._v(" "),t.validations?a("ValidationMessages",{attrs:{validations:t.validations}}):t._e()],1)}),[],!1,null,"3885aede",null);e.a=r.exports},1065:function(t,e,a){},1087:function(t,e,a){"use strict";a(1065)},1315:function(t,e,a){},1316:function(t,e,a){},1500:function(t,e,a){"use strict";a(1315)},1501:function(t,e,a){"use strict";a(1316)},1574:function(t,e,a){"use strict";a.r(e);var s,i=a(1116),r=a(1011),n=a.n(r),o=a(1335),c=a(47),u=a.n(c),l={name:"ReviewList",data:()=>({currentPage:1,rating_value:0,rating_price:0,rating_qty:0}),props:{productId:{type:[String,Number],required:!0},productName:{type:String,default:""},perPage:{type:Number,required:!1,default:4}},methods:{async refreshList(){await this.$store.dispatch("review/list",{productId:this.productId,sort:"created_at:desc"})},prevPage(){this.currentPage=Math.max(1,this.currentPage-1)},nextPage(){this.currentPage=Math.min(this.pageCount,this.currentPage+1)},changePage(t){this.currentPage=Math.max(1,Math.min(this.pageCount,t))},getAvgReview(t){for(var e=0,a=0;a<t.length;a++)e+=t[a].percent;return Math.round(e/3)},getDate:t=>u()(t.created_at).format("DD MMMM YYYY")},mounted(){this.$bus.$on("product-after-load",this.refreshList)},destroyed(){this.$bus.$off("product-after-load",this.refreshList)},mixins:[i.a],computed:{itemsPerPage(){let t=(this.currentPage-1)*this.perPage,e=t+this.perPage;return this.reviews?this.reviews.slice(t,e).filter(t=>!!t.review_status):0},pageCount(){return this.reviews&&this.reviews.length?Math.floor(this.reviews.length/this.perPage)+Math.min(1,this.reviews.length%this.perPage):0},pageList(){if(this.pageCount<=5||1===this.currentPage||2===this.currentPage){const t=[];for(let e=1;e<=Math.min(this.pageCount,5);e+=1)t.push(e);return t}if(this.currentPage===this.pageCount||this.currentPage===this.pageCount-1){const t=[];for(let e=this.pageCount;e>=1&&e>=this.pageCount-4;e-=1)t.unshift(e);return t}return[this.currentPage-2,this.currentPage-1,this.currentPage,this.currentPage+1,this.currentPage+2]}}},d=(a(1500),a(19)),p=Object(d.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.itemsPerPage,(function(e,s){return a("div",{key:s,staticClass:"mt10",attrs:{itemprop:"review",itemscope:"",itemtype:"http://schema.org/Review"}},[a("meta",{attrs:{itemprop:"itemReviewed",content:t._f("htmlDecode")(t.productName)}}),t._v(" "),a("div",{staticClass:"review-rating"},[e.ratings?a("div",{staticClass:"rating-summary"},[a("span",{style:{width:t.getAvgReview(e.ratings)+"%"}})]):t._e()]),t._v(" "),a("h4",{staticClass:"weight-400 m0 title",attrs:{itemprop:"reviewAspect",content:e.title}},[t._v("\n      "+t._s(e.title)+"\n    ")]),t._v(" "),a("p",{staticClass:"cl-gray lh25 details",attrs:{itemprop:"reviewBody",content:e.detail}},[t._v("\n      "+t._s(e.detail)+"\n    ")]),t._v(" "),a("strong",{staticClass:"font-size--small color--heather_grey--3"},[a("span",{attrs:{itemprop:"author"}},[t._v(t._s(e.nickname))]),t._v(", "+t._s(t.getDate(e)))])])})),t._v(" "),t.pageCount>1?a("div",{staticClass:"row middle-xs center-xs mt50 pagination-block"},[a("a",{staticClass:"no-underline",class:{inactive:1===t.currentPage},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.prevPage(e)}}},[a("i",{staticClass:"material-icons"},[t._v("chevron_left")])]),t._v(" "),t._l(t.pageList,(function(e){return a("span",{key:e,staticClass:"pagination-page"},[e===t.currentPage?a("span",{staticClass:"fs-medium block py15 px20 bg-cl-mine-shaft cl-white active"},[t._v("\n        "+t._s(e)+"\n      ")]):a("a",{staticClass:"fs-medium block py15 px20 bg-cl-secondary pointer",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.changePage(e)}}},[t._v("\n        "+t._s(e)+"\n      ")])])})),t._v(" "),a("a",{staticClass:"no-underline",class:{inactive:t.currentPage===t.pageCount},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage(e)}}},[a("i",{staticClass:"material-icons"},[t._v("chevron_right")])])],2):t._e()],2)}),[],!1,null,"df906f82",null).exports,m=a(1005),h=a(1043),v=a(1053),f=a(1079),_=a(1038),g=a(1009),b=a.n(g),C=a(13),P=a(18),$=a(0),w=a(5),y=a(20),x=a(15),D=a(22),q=a(3),k=a(1),I=function(t){return D.a.execute({url:Object(q.j)(k.product_question.create_endpoint),payload:{method:"POST",mode:"cors",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({product_question:t})}}).then((function(t){return 200===t.code}))},O={namespaced:!0,state:{items:[]},actions:{list:function(t,e){var a=e.productId,s=e.start,i=void 0===s?0:s,r=e.size,n=void 0===r?50:r,o=e.entityType,c=void 0===o?"product_question":o,u=e.sort,l=void 0===u?"":u,d=e.excludeFields,p=void 0===d?null:d,m=e.includeFields,h=void 0===m?null:m;return $.b(this,void 0,void 0,(function(){var e,s;return $.c(this,(function(r){switch(r.label){case 0:return e=function(t){var e=t.productId,a=new x.a;return e&&(a=a.applyFilter({key:"product_id",value:{in:[0,e]}})),a}({productId:a}),[4,Object(y.b)({query:e,start:i,size:n,entityType:c,sort:l,excludeFields:p,includeFields:h})];case 1:return s=r.sent(),t.commit("product_question/UPD_PRODUCT_QUESTIONS",s),[2]}}))}))},add:function(t,e){return $.b(this,void 0,void 0,(function(){var t;return $.c(this,(function(a){switch(a.label){case 0:return w.b.$emit("notification-progress-start",C.a.t("Adding a product question ...")),[4,I(e)];case 1:return t=a.sent(),w.b.$emit("notification-progress-stop"),t&&w.b.$emit("clear-add-product-question-form"),[2,t]}}))}))}},mutations:((s={})["product_question/UPD_PRODUCT_QUESTIONS"]=function(t,e){t.items=e},s)},M=function(t){t.store.registerModule("product_question",O)},N={name:"ProductQuestionForm",data:()=>({formData:{author_name:"",author_email:"",content:"",is_private:!1}}),props:{productId:{type:[String,Number],required:!0},productName:{type:String,default:""}},computed:{currentUser(){return this.$store.state.user.current}},methods:{validate(){this.$v.$touch(),this.$v.$invalid||this.submit()},async submit(){await this.$store.dispatch("product_question/add",{product_id:this.productId,content:this.formData.content,author_name:this.formData.author_name,author_email:this.formData.author_email,is_private:this.formData.is_private,customer_id:this.currentUser?this.currentUser.id:null})?this.$store.dispatch("notification/spawnNotification",{type:"success",message:C.a.t("You submitted your question for moderation."),action1:{label:C.a.t("OK")}}):this.$store.dispatch("notification/spawnNotification",{type:"error",message:C.a.t("Something went wrong. Try again in a few seconds."),action1:{label:C.a.t("OK")}})},clearProductQuestionForm(){this.formData.author_name="",this.formData.author_email="",this.formData.content="",this.formData.is_private=!1,this.$v.$reset()},login(){this.$bus.$emit("modal-show","modal-signup")},fillInUserData(){this.currentUser&&(this.formData.author_name=this.currentUser.firstname+" "+this.currentUser.lastname,this.formData.author_email=this.currentUser.email)},detailsOpen:()=>!0},mounted(){this.$bus.$on("clear-add-product-question-form",this.clearProductQuestionForm),this.$bus.$on("user-after-loggedin",this.fillInUserData)},destroyed(){this.$bus.$off("clear-add-product-question-form",this.clearProductQuestionForm),this.$bus.$off("user-after-loggedin",this.fillInUserData)},beforeMount(){this.clearProductQuestionForm(),this.fillInUserData()},beforeCreate(){Object(P.c)(M)},validations:{formData:{author_name:{minLength:Object(m.minLength)(2),required:m.required},author_email:{required:m.required,email:m.email},content:{required:m.required}}},components:{ButtonFull:_.a,BaseInput:h.a,BaseCheckbox:v.a,BaseTextarea:f.a,"no-ssr":b.a}},U=Object(d.a)(N,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.outOfScope()}}},[a("div",{staticClass:"mb10"},[a("base-input",{attrs:{type:"text",placeholder:t.$t("Name")+" *",validations:[{condition:t.$v.formData.author_name.$error&&!t.$v.formData.author_name.required,text:t.$t("Field is required")},{condition:!t.$v.formData.author_name.minLength,text:t.$t("Name must have at least 2 letters.")}]},on:{blur:function(e){return t.$v.formData.author_name.$touch()}},model:{value:t.formData.author_name,callback:function(e){t.$set(t.formData,"author_name",e)},expression:"formData.author_name"}})],1),t._v(" "),a("div",{staticClass:"mb10"},[a("base-input",{attrs:{type:"email",placeholder:t.$t("Email address")+" *",validations:[{condition:t.$v.formData.author_email.$error&&!t.$v.formData.author_email.required,text:t.$t("Field is required")},{condition:!t.$v.formData.author_email.email&&t.$v.formData.author_email.$error,text:t.$t("Please provide valid e-mail address.")}]},on:{blur:function(e){return t.$v.formData.author_email.$touch()}},model:{value:t.formData.author_email,callback:function(e){t.$set(t.formData,"author_email",e)},expression:"formData.author_email"}})],1),t._v(" "),a("div",{staticClass:"mb25"},[a("base-textarea",{attrs:{type:"text",placeholder:t.$t("Question")+" *",validations:[{condition:t.$v.formData.content.$error&&!t.$v.formData.content.required,text:t.$t("Field is required")}]},on:{blur:function(e){return t.$v.formData.content.$touch()}},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1),t._v(" "),a("div",{staticClass:"mb10"},[a("base-checkbox",{staticClass:"col-xs-12 mb15",attrs:{id:"product-question-form-is-private"},model:{value:t.formData.is_private,callback:function(e){t.$set(t.formData,"is_private",e)},expression:"formData.is_private"}},[t._v("\n      "+t._s(t.$t("Is Private"))+"\n    ")])],1),t._v(" "),a("div",{staticClass:"row m0 middle-xs center-xs start-sm buttons"},[a("no-ssr",[a("button-full",{class:{"w-auto action--outline":!t.currentUser},nativeOn:{click:function(e){return t.validate()}}},[t._v("\n        "+t._s(t.$t("Write a Question"))+"\n      ")])],1)],1)])}),[],!1,null,null,null).exports,L={name:"ProductQuestionList",data:()=>({currentPage:1}),props:{productId:{type:[String,Number],required:!0},perPage:{type:Number,required:!1,default:4}},methods:{refreshList(){this.$store.dispatch("product_question/list",{productId:this.productId})},prevPage(){this.currentPage=Math.max(1,this.currentPage-1)},nextPage(){this.currentPage=Math.min(this.pageCount,this.currentPage+1)},changePage(t){this.currentPage=Math.max(1,Math.min(this.pageCount,t))}},mounted(){this.$bus.$on("product-after-load",this.refreshList)},destroyed(){this.$bus.$off("product-after-load",this.refreshList)},beforeMount(){this.refreshList()},beforeCreate(){Object(P.c)(M)},mixins:[{name:"ProductQuestion",computed:{product_questions:function(){return this.$store.state.product_question.items.items}}}],computed:{itemsPerPage(){let t=(this.currentPage-1)*this.perPage,e=t+this.perPage;return this.product_questions?this.product_questions.slice(t,e):0},pageCount(){return this.product_questions&&this.product_questions.length?Math.floor(this.product_questions.length/this.perPage)+Math.min(1,this.product_questions.length%this.perPage):0},pageList(){if(this.pageCount<=5||1===this.currentPage||2===this.currentPage){const t=[];for(let e=1;e<=Math.min(this.pageCount,5);e+=1)t.push(e);return t}if(this.currentPage===this.pageCount||this.currentPage===this.pageCount-1){const t=[];for(let e=this.pageCount;e>=1&&e>=this.pageCount-4;e-=1)t.unshift(e);return t}return[this.currentPage-2,this.currentPage-1,this.currentPage,this.currentPage+1,this.currentPage+2]}}},Q=(a(1501),Object(d.a)(L,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.itemsPerPage&&0!==t.itemsPerPage.length?t._e():a("div",{staticClass:"mt10 h5"},[t._v("\n    "+t._s(t.$t("No questions have been posted yet. Please don't hesitate to ask a question!"))+"\n  ")]),t._v(" "),t._l(t.itemsPerPage,(function(e,s){return a("div",{key:s,staticClass:"mt10",attrs:{itemscope:"",itemtype:"http://schema.org/Question"}},[a("p",{staticClass:"cl-gray lh25",attrs:{itemprop:"name",content:e.content}},[t._v("\n      "+t._s(e.content)+"\n    ")]),t._v(" "),a("p",{staticClass:"cl-tertiary mt10 mb20 fs-medium-small"},[a("span",[t._v("asked "),a("time",{attrs:{itemprop:"dateCreated",datetime:t._f("date")(e.created_at)}},[t._v(t._s(t._f("date")(e.created_at)))])]),t._v(" "),a("span",{attrs:{itemprop:"author",itemscope:"",itemtype:"http://schema.org/Person"}},[a("span",{attrs:{itemprop:"name"}},[t._v(t._s(e.author_name))])])]),t._v(" "),t._l(e.answers,(function(e){return a("div",{key:e.content,attrs:{itemprop:"suggestedAnswer",itemscope:"",itemtype:"http://schema.org/Answer"}},[a("div",{attrs:{itemprop:"text"}},[t._v("\n        "+t._s(e.content)+"\n      ")]),t._v(" "),a("p",{staticClass:"cl-tertiary mt10 mb20 fs-medium-small"},[a("span",[t._v("answered "),a("time",{attrs:{itemprop:"dateCreated",datetime:t._f("date")(e.created_at)}},[t._v(t._s(t._f("date")(e.created_at)))])]),t._v(" "),a("span",{attrs:{itemprop:"author",itemscope:"",itemtype:"http://schema.org/Person"}},[a("span",{attrs:{itemprop:"name"}},[t._v(t._s(e.author_name))])])])])}))],2)})),t._v(" "),t.pageCount>1?a("div",{staticClass:"row middle-xs center-xs mt50 pagination-block"},[a("a",{staticClass:"no-underline",class:{inactive:1===t.currentPage},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.prevPage(e)}}},[a("i",{staticClass:"material-icons"},[t._v("chevron_left")])]),t._v(" "),t._l(t.pageList,(function(e){return a("span",{key:e,staticClass:"pagination-page"},[e===t.currentPage?a("span",{staticClass:"fs-medium block py15 px20 bg-cl-mine-shaft cl-white active"},[t._v("\n        "+t._s(e)+"\n      ")]):a("a",{staticClass:"fs-medium block py15 px20 bg-cl-secondary pointer",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.changePage(e)}}},[t._v("\n        "+t._s(e)+"\n      ")])])})),t._v(" "),a("a",{staticClass:"no-underline",class:{inactive:t.currentPage===t.pageCount},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage(e)}}},[a("i",{staticClass:"material-icons"},[t._v("chevron_right")])])],2):t._e()],2)}),[],!1,null,"73af855b",null).exports),F={name:"ProductQuestionReviewTabs",data:()=>({activetab:3}),props:{productId:{type:[String,Number],required:!0},productName:{type:String,default:""}},computed:{currentUser(){return this.$store.state.user.current}},methods:{detailsOpen:()=>!0},mixins:[i.a],components:{Collapse:n.a,ReviewForm:o.a,ReviewsList:p,ProductQuestionForm:U,ProductQuestionList:Q}},S=Object(d.a)(F,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-review",attrs:{id:"product-review"}},[a("section",{staticClass:"container p0 cl-primary desktop-view"},[a("div",{staticClass:"row between-xs productname-text m0"},[a("div",{staticClass:"tabs-content"},[a("div",{staticClass:"tabs"},[a("a",{staticClass:"h3 m0 mb10 serif lh20 details-title heading2",class:[3===t.activetab?"active":""],on:{click:function(e){t.activetab=3}}},[t._v(t._s(t.$t("Reviews")))]),t._v(" "),a("a",{staticClass:"h3 m0 mb10 serif lh20 details-title heading2",class:[4===t.activetab?"active":""],on:{click:function(e){t.activetab=4}}},[t._v(t._s(t.$t("Product Questions")))])]),t._v(" "),a("div",{staticClass:"content"},[3===t.activetab?a("div",{staticClass:"tabcontent"},[a("div",{staticClass:"col-xs-12 col-md-12 p0 align-left"},[a("reviews-list",{staticClass:"review-list-content",attrs:{"per-page":4,"product-name":t.productName,"product-id":t.productId}})],1),t._v(" "),a("div",{staticClass:"col-xs-12 col-md-12 p0 mt20 review-form"},[a("h2",{staticClass:"heading2"},[t._v("\n                "+t._s(t.$t("Add review"))+"\n              ")]),t._v(" "),a("review-form",{attrs:{"product-id":t.productId}})],1)]):t._e(),t._v(" "),4===t.activetab?a("div",{staticClass:"tabcontent"},[a("product-question-list",{staticClass:"product-question",attrs:{"per-page":4,"product-id":t.productId}}),t._v(" "),a("product-question-form",{attrs:{"product-id":t.productId}})],1):t._e()])])])]),t._v(" "),a("div",{staticClass:"content-product-review mobile-view"},[a("collapse",{attrs:{selected:!1}},[a("div",{attrs:{slot:"collapse-header"},slot:"collapse-header"},[a("a",{staticClass:"h3 m0 mb10 serif lh20 details-title heading2"},[t._v(t._s(t.$t("Reviews")))])]),t._v(" "),a("div",{attrs:{slot:"collapse-body"},slot:"collapse-body"},[a("div",{staticClass:"details-wrapper brdr-top-1",class:{"details-wrapper--open":t.detailsOpen}},[a("div",{staticClass:"row between-md m0"},[a("div",{staticClass:"col-xs-12 product-tab-container reviews"},[a("div",{staticClass:"col-xs-12 col-md-12 p0 align-left"},[a("reviews-list",{staticClass:"review-list-content",attrs:{"per-page":4,"product-name":t.productName}})],1),t._v(" "),a("div",{staticClass:"col-xs-12 col-md-12 p0 mt20 review-form"},[a("h2",{staticClass:"heading2"},[t._v("\n                  "+t._s(t.$t("Write a review"))+"\n                ")]),t._v(" "),a("review-form")],1)])])])])]),t._v(" "),a("collapse",{attrs:{selected:!1}},[a("div",{attrs:{slot:"collapse-header"},slot:"collapse-header"},[a("a",{staticClass:"h3 m0 mb10 serif lh20 details-title heading2"},[t._v(t._s(t.$t("Product Questions")))])]),t._v(" "),a("div",{attrs:{slot:"collapse-body"},slot:"collapse-body"},[a("div",{staticClass:"details-wrapper brdr-top-1",class:{"details-wrapper--open":t.detailsOpen}},[a("div",{staticClass:"row between-md m0"},[a("div",{staticClass:"col-xs-12 product-tab-container specification"},[a("product-question-list",{staticClass:"product-question",attrs:{"per-page":4,"product-id":t.productId}}),t._v(" "),a("product-question-form",{attrs:{"product-id":t.productId}})],1)])])])])],1)])}),[],!1,null,null,null);e.default=S.exports}}]);