(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{1610:function(t,e,s){"use strict";s.r(e);var r=s(369),i=s(34),u=s(167),o=s(13),d=s(1),c={name:"Related",components:{ProductListing:r.a},props:{type:{type:String,required:!0},heading:{type:String,required:!1,default:o.a.t("Related Products")}},serverPrefetch(){return this.refreshList},computed:{...Object(i.c)({getProductRelated:"product/getProductRelated",getCurrentProduct:"product/getCurrentProduct"}),getCurrentRelatedProducts(){return this.getProductRelated[this.type]||[]},productLinks(){return this.getCurrentProduct.product_links}},beforeMount(){this.$bus.$on("product-after-load",this.refreshList),d.usePriceTiers&&(this.$bus.$on("user-after-loggedin",this.refreshList),this.$bus.$on("user-after-logout",this.refreshList)),this.refreshList()},beforeDestroy(){d.usePriceTiers&&(this.$bus.$off("user-after-loggedin",this.refreshList),this.$bus.$off("user-after-logout",this.refreshList))},destroyed(){this.$bus.$off("product-after-load",this.refreshList)},methods:{async refreshList(){let t=this.productLinks?this.productLinks.filter(t=>t.link_type===this.type).map(t=>t.linked_product_sku):null,e="sku";null!==t&&0!==t.length||(t=this.getCurrentProduct.category_ids,e="category_ids");let s=Object(u.a)(e,t);const r=await this.$store.dispatch("product/list",{query:s,size:8,prefetchGroupProducts:!1,updateState:!1});r&&(this.$store.dispatch("product/related",{key:this.type,items:r.items}),this.$forceUpdate())}}},n=s(19),a=Object(n.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return this.getCurrentRelatedProducts.length?e("section",{staticClass:"p container px20 related-products"},[e("div",[e("header",{staticClass:"col-md-12"},[e("h2",{staticClass:"cl-accent heading1"},[this._v("\n        "+this._s(this.heading)+"\n      ")])])]),this._v(" "),e("product-listing",{attrs:{products:this.getCurrentRelatedProducts,columns:5,"max-displayed":5,"enable-mobile-carousel":!0}})],1):this._e()}),[],!1,null,null,null);e.default=a.exports}}]);