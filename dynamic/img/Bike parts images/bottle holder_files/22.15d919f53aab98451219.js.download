(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1043:function(e,t,a){"use strict";var i={name:"BaseInput",components:{ValidationMessages:a(1040).a},data:()=>({passType:"password",iconActive:!1,icon:"visibility_off"}),props:{type:{type:String,required:!0},value:{type:[String,Number],default:""},name:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:""},autocomplete:{type:String,required:!1,default:""},focus:{type:Boolean,required:!1,default:!1},autofocus:{type:Boolean,required:!1,default:!1},validations:{type:Array,default:()=>[]}},methods:{togglePassType(){"password"===this.passType?(this.passType="text",this.icon="visibility"):(this.passType="password",this.icon="visibility_off")},setFocus(e){this.name===e&&this.$refs[this.name].focus()}},created(){"password"===this.type&&(this.iconActive=!0)},mounted(){this.focus&&this.$refs[this.name].focus()}},r=(a(1062),a(19)),s=Object(r.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative base-input"},[a("div",{staticClass:"relative"},[a("input",{ref:e.name,class:{pr30:"password"===e.type,empty:""===e.value},attrs:{type:"password"===e.type?e.passType:e.type,name:e.name,autocomplete:e.autocomplete,autofocus:e.autofocus,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},blur:function(t){return e.$emit("blur")},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("keyup.enter",t.target.value)},function(t){return e.$emit("keyup",t)}]}}),e._v(" "),a("label",[e._v(e._s(e.placeholder))])]),e._v(" "),e.iconActive?a("a",{staticClass:"\n      icon material-icons absolute brdr-none no-outline\n      p0 bg-cl-transparent cl-brdr-secondary pointer\n    ",attrs:{type:"button","aria-label":e.$t("Toggle password visibility"),title:e.$t("Toggle password visibility")},on:{click:function(t){return e.togglePassType()}}},[e._v("\n    "+e._s(e.icon)+"\n  ")]):e._e(),e._v(" "),e.validations?a("ValidationMessages",{attrs:{validations:e.validations}}):e._e()],1)}),[],!1,null,"136861f2",null);t.a=s.exports},1050:function(e,t,a){},1062:function(e,t,a){"use strict";a(1050)},1069:function(e,t,a){},1079:function(e,t,a){"use strict";var i={name:"BaseTextarea",components:{ValidationMessages:a(1040).a},data:()=>({iconActive:!1,icon:"visibility"}),props:{type:{type:String,required:!0},value:{type:[String,Number],required:!0},name:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:""},autocomplete:{type:String,required:!1,default:""},focus:{type:Boolean,required:!1,default:!1},autofocus:{type:Boolean,required:!1,default:!1},validations:{type:Array,default:()=>[]}},mounted(){this.focus&&this.$refs[this.name].focus()}},r=(a(1100),a(19)),s=Object(r.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative"},[a("div",{staticClass:"relative"},[a("textarea",{ref:!!e.focus&&e.name,class:{empty:""===e.value},attrs:{type:e.type,name:e.name,autocomplete:e.autocomplete,autofocus:e.autofocus,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},blur:function(t){return e.$emit("blur")},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("keyup.enter",t.target.value)},function(t){return e.$emit("keyup",t)}]}}),e._v(" "),a("label",[e._v("\n      "+e._s(e.placeholder)+"\n    ")])]),e._v(" "),e.validations?a("ValidationMessages",{attrs:{validations:e.validations}}):e._e()],1)}),[],!1,null,"1c1f2fba",null);t.a=s.exports},1100:function(e,t,a){"use strict";a(1069)},1276:function(e,t,a){},1335:function(e,t,a){"use strict";var i=a(1005),r=a(1043),s=a(1079),n=a(1038),o=a(1009),l=a.n(o),u=a(13),c={name:"ReviewForm",components:{ButtonFull:n.a,BaseInput:r.a,BaseTextarea:s.a,"no-ssr":l.a},props:{productId:{type:[String,Number],required:!0},isBike:{type:Boolean,default:!1}},data:()=>({reviewData:{name:"",email:"",summary:"",review:"",ratings_rating:5,image:null,location:"",bikeDetail:"",bikeSpecification:""}}),computed:{currentUser(){return this.$store.state.user.current}},beforeMount(){this.fillInUserData()},mounted(){this.$bus.$on("clear-add-review-form",this.clearReviewForm),this.$bus.$on("user-after-loggedin",this.fillInUserData)},destroyed(){this.$bus.$off("clear-add-review-form",this.clearReviewForm),this.$bus.$off("user-after-loggedin",this.fillInUserData)},validations:{reviewData:{name:{minLength:Object(i.minLength)(2),required:i.required},email:{required:i.required,email:i.email},summary:{required:i.required},review:{required:i.required},ratings_rating:{minValue:Object(i.minValue)(1),maxValue:Object(i.maxValue)(5),numeric:i.numeric,required:i.required}}},methods:{validate(){this.$v.$touch(),this.$v.$invalid||this.submit()},async submit(){let e={product_id:this.productId,title:this.reviewData.summary,detail:this.reviewData.review,nickname:this.reviewData.name,review_entity:"product",image:this.reviewData.image,location:this.reviewData.location,bike_detail:this.reviewData.bikeDetail,bike_specification:this.reviewData.bikeSpecification,ratings:[{rating_name:"Rating",value:this.reviewData.ratings_rating}]};await this.$store.dispatch("review/add",e)?this.$store.dispatch("notification/spawnNotification",{type:"success",message:u.a.t("You submitted your review for moderation."),action1:{label:u.a.t("OK")}}):this.$store.dispatch("notification/spawnNotification",{type:"error",message:u.a.t("Something went wrong. Try again in a few seconds."),action1:{label:u.a.t("OK")}})},setStarRating(e){this.reviewData.ratings_rating=e},clearReviewForm(){this.reviewData.summary="",this.reviewData.review="",this.reviewData.ratings_rating="",this.reviewData.image=null,this.reviewData.location="",this.reviewData.bikeDetail="",this.reviewData.bikeSpecification="",this.$v.$reset()},login(){this.$bus.$emit("modal-show","modal-signup")},fillInUserData(){this.currentUser&&(this.reviewData.name=this.currentUser.firstname,this.reviewData.email=this.currentUser.email)},detailsOpen:()=>!0,async onFileSelected(e){if(!e.target||!e.target.files)return;const t=e.target.files[0];if(t.size>19e5)return this.$store.dispatch("notification/spawnNotification",{type:"warning",message:u.a.t("Max image size is 1.9MB."),action1:{label:u.a.t("OK")}}),void(this.reviewData.image="");const a=await this.imageToBase64(t);this.reviewData.image=a},imageToBase64:e=>new Promise((t,a)=>{const i=new FileReader;i.onload=e=>{if(e&&e.target&&e.target.result){const a=String(e.target.result);t(a)}},i.onerror=a,i.readAsDataURL(e)})}},v=(a(1461),a(19)),d=Object(v.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.outOfScope()}}},[a("div",{staticClass:"star-container mb10"},e._l(5,(function(t){var i;return a("i",{key:t,staticClass:"fas fa-star",class:(i={},i["stars-"+(6-t)]=e.reviewData.ratings_rating===6-t,i),on:{click:function(a){return e.setStarRating(6-t)}}})})),0),e._v(" "),a("div",{staticClass:"mb10"},[a("base-input",{attrs:{type:"text",placeholder:e.$t("First name")+" *",validations:[{condition:e.$v.reviewData.name.$error&&!e.$v.reviewData.name.required,text:e.$t("Field is required")},{condition:!e.$v.reviewData.name.minLength,text:e.$t("Name must have at least 2 letters.")}]},on:{blur:function(t){return e.$v.reviewData.name.$touch()}},model:{value:e.reviewData.name,callback:function(t){e.$set(e.reviewData,"name",t)},expression:"reviewData.name"}})],1),e._v(" "),a("div",{staticClass:"mb10"},[a("base-input",{attrs:{type:"email",placeholder:e.$t("Email address")+" *",validations:[{condition:e.$v.reviewData.email.$error&&!e.$v.reviewData.email.required,text:e.$t("Field is required")},{condition:!e.$v.reviewData.email.email&&e.$v.reviewData.email.$error,text:e.$t("Please provide valid e-mail address.")}]},on:{blur:function(t){return e.$v.reviewData.email.$touch()}},model:{value:e.reviewData.email,callback:function(t){e.$set(e.reviewData,"email",t)},expression:"reviewData.email"}})],1),e._v(" "),a("div",{staticClass:"mb10"},[a("base-input",{attrs:{type:"text",placeholder:e.$t("Summary")+" *",validations:[{condition:e.$v.reviewData.summary.$error&&!e.$v.reviewData.summary.required,text:e.$t("Field is required")}]},on:{blur:function(t){return e.$v.reviewData.summary.$touch()}},model:{value:e.reviewData.summary,callback:function(t){e.$set(e.reviewData,"summary",t)},expression:"reviewData.summary"}})],1),e._v(" "),a("div",{staticClass:"mb10"},[a("base-textarea",{attrs:{type:"text",placeholder:e.$t("Review")+" *",validations:[{condition:e.$v.reviewData.review.$error&&!e.$v.reviewData.review.required,text:e.$t("Field is required")}]},on:{blur:function(t){return e.$v.reviewData.review.$touch()}},model:{value:e.reviewData.review,callback:function(t){e.$set(e.reviewData,"review",t)},expression:"reviewData.review"}})],1),e._v(" "),a("div",{staticClass:"mb10"},[a("base-input",{attrs:{type:"text",placeholder:e.$t("Location")},on:{blur:function(t){return e.$v.reviewData.location.$touch()}},model:{value:e.reviewData.location,callback:function(t){e.$set(e.reviewData,"location",t)},expression:"reviewData.location"}})],1),e._v(" "),a("div",{staticClass:"mb10 review-file-upload"},[a("label",{attrs:{for:"review-upload"}},[e._v("\n      Upload a photo\n    ")]),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.reviewData.image,expression:"reviewData.image"}],staticClass:"fas fa-check ml10"}),e._v(" "),a("input",{attrs:{type:"file",accept:"image/*",id:"review-upload"},on:{change:e.onFileSelected}})]),e._v(" "),e.isBike?[a("div",{staticClass:"mb10"},[a("base-input",{attrs:{type:"text",placeholder:e.$t("Bike Detail")},on:{blur:function(t){return e.$v.reviewData.bikeDetail.$touch()}},model:{value:e.reviewData.bikeDetail,callback:function(t){e.$set(e.reviewData,"bikeDetail",t)},expression:"reviewData.bikeDetail"}})],1),e._v(" "),a("div",{staticClass:"mb10"},[a("base-input",{attrs:{type:"text",placeholder:e.$t("Bike Specification")},on:{blur:function(t){return e.$v.reviewData.bikeSpecification.$touch()}},model:{value:e.reviewData.bikeSpecification,callback:function(t){e.$set(e.reviewData,"bikeSpecification",t)},expression:"reviewData.bikeSpecification"}})],1)]:e._e(),e._v(" "),a("div",{staticClass:"row m0 middle-xs center-xs start-sm buttons"},[a("no-ssr",[a("button-full",{class:{"w-auto action--outline":!e.currentUser},nativeOn:{click:function(t){return e.validate()}}},[e._v("\n        "+e._s(e.$t("Write a review"))+"\n      ")])],1)],1)],2)}),[],!1,null,"15328548",null);t.a=d.exports},1461:function(e,t,a){"use strict";a(1276)}}]);